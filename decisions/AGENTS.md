# AI 개발 가이드 (decisions/AGENTS.md)

> **목표** – 이 문서는 `SchemaForm` 프로젝트의 주요 아키텍처 및 기술적 결정사항을 기록하고 관리하는 절차를 정의합니다. AI 어시스턴트와 인간 개발자 모두 이 가이드를 따릅니다.

---

## 0. 기본 원칙

이 디렉토리의 모든 활동은 프로젝트 루트의 `agent/AGENTS.md`에 명시된 전반적인 규칙을 따릅니다. 이 문서는 결정사항 기록(ADR - Architectural Decision Record)에 특화된 추가 규칙을 제공합니다.

**핵심 원칙**: 이 디렉토리의 목적은 "왜" 특정 결정을 내렸는지에 대한 컨텍스트를 보존하는 것입니다. 모든 기록은 명확하고, 완전하며, 나중에 참조하기 쉬워야 합니다.

---

## 1. 결정사항 기록(ADR) 관리 프로세스

프로젝트에 영향을 미치는 중요한 기술적 결정이 내려지면, 그 과정을 ADR로 기록해야 합니다. AI 에이전트는 이 과정에서 초안 작성 및 정보 수집을 지원할 수 있습니다.

### ADR 생성 절차

1. **새 파일 생성**:
    * 파일명은 `NNNN-kebab-case-title.md` 형식을 따릅니다. `NNNN`은 0001부터 시작하는 4자리 숫자입니다.
    * 예: `0001-use-zod-for-schema-validation.md`
2. **템플릿 사용**:
    * 새 파일의 내용은 항상 `decisions/template.md` 파일에서 복사하여 시작합니다.
3. **내용 작성**:
    * 아래의 "템플릿 작성 가이드" 섹션을 참조하여 각 항목을 상세히 채웁니다. AI 에이전트가 초안을 작성할 수 있습니다.
4. **상태 변경**:
    * 초기 상태는 `proposed`로 설정합니다.
    * 충분한 논의 후 인간 개발자가 상태를 `accepted` 또는 `rejected` 등으로 변경합니다. AI 에이전트는 상태를 임의로 `accepted`로 변경해서는 안 됩니다.

---

## 2. 템플릿 작성 가이드 (`template.md`)

`decisions/example.md` 파일을 고품질 ADR의 모범 사례로 참고하세요.

### `Title`

* 결정사항의 핵심 내용을 요약하는 명확한 제목을 작성합니다.

### `Date`

* 결정이 제안된 날짜를 `YYYY-MM-DD` 형식으로 기입합니다.

### `Status`

* 다음 상태 중 하나를 사용합니다.
  * `proposed`: 아이디어가 제안되었지만 아직 논의 중인 상태. (AI가 생성 시 기본값)
  * `accepted`: 팀의 동의를 얻어 채택된 결정. (인간 개발자가 설정)
  * `rejected`: 논의 결과, 채택하지 않기로 한 결정.
  * `deprecated`: 과거에 채택되었으나 더 이상 권장되지 않는 결정.
  * `superseded by [0005](0005-example.md)`: 이 결정이 새로운 결정으로 대체되었음을 의미합니다. 다른 ADR 문서로 링크를 걸어야 합니다.

### `Context`

* **"왜"** 이 논의가 시작되었는지 설명합니다.
* 해결하려는 문제, 현재의 제약 조건, 고려되었던 대안들을 기술합니다.
* 관련 GitHub 이슈, Slack 논의, 외부 문서 링크 등을 포함하여 최대한 상세한 배경 정보를 제공하는 것이 중요합니다. `example.md`에서처럼 깊이 있는 분석을 지향합니다.

### `Decision`

* **"무엇을"** 하기로 결정했는지 명확하게 기술합니다.
* 최종적으로 선택된 접근 방식, 기술, 패턴 등을 설명합니다.
* 필요한 경우, 코드 스니ppet, 타입 정의, Mermaid.js를 이용한 다이어그램 등을 포함하여 이해를 돕습니다.

### `Consequences`

* **"그래서 무엇이 달라지는가"**를 설명합니다.
* 이 결정으로 인해 발생하는 긍정적, 부정적 결과를 모두 기술합니다.
* 해결된 문제, 새롭게 발생한 트레이드오프, 후속으로 필요한 작업, 개발자들에게 미치는 영향 등을 포함합니다.

---

## 3. AI 에이전트를 위한 규칙

| 번호 | AI가 *수행해도 되는* 작업 | AI가 *절대 수행하면 안 되는* 작업 |
|---|---|---|
| D-1 | 중요한 아키텍처 변경, 새로운 라이브러리 도입 등과 같은 주제에 대해 ADR 초안 작성을 **제안**하고 `proposed` 상태로 파일을 생성합니다. | ❌ 사소한 버그 수정이나 리팩토링에 대해 ADR을 생성하지 않습니다. |
| D-2 | `Context` 섹션 작성을 위해 GitHub 이슈, PR, 관련 문서를 검색하고 요약하여 내용을 채웁니다. | ❌ 인간 개발자의 명시적인 승인 없이 ADR의 상태를 `proposed`에서 `accepted`로 변경하지 않습니다. |
| D-3 | `template.md` 와 `example.md`를 참조하여 ADR의 구조와 스타일을 일관성 있게 유지합니다. | ❌ 기존 ADR의 핵심 `Context`나 `Decision` 내용을 임의로 삭제하거나 왜곡하지 않습니다. (내용 추가 및 개선은 가능) |
