# SchemaForm 제품 요구사항 명세서 (PRD)

**문서의 목표:** 본 문서는 개발 생산성 향상을 위한 'SchemaForm' 라이브러리의 초기 버전(MVP) 및 후속 버전 개발에 대한 요구사항을 정의하고, 관련된 모든 이해관계자가 동일한 목표와 범위를 이해하고 합의하는 것을 목표로 합니다.

---

## 1. 개요 (Overview)

### 제품 요약 (Summary)

본 제품은 React 개발자를 위한 스키마 기반 폼(Form) 생성 라이브러리 **'SchemaForm'** 입니다. 내부적으로는 검증된 라이브러리인 `react-hook-form`을 핵심 엔진으로 사용하여 안정적인 폼 상태 관리를 제공합니다. 개발자는 `zod`를 사용하여 폼의 데이터 구조와 유효성 검사 규칙을 선언적으로 정의하며, 'SchemaForm'은 이 스키마를 입력받아 지정된 UI 라이브러리(MUI 등)의 컴포넌트로 자동으로 폼 UI를 렌더링합니다. 핵심은 **어댑터(Adapter) 패턴**과 `react-hook-form` 기반의 아키텍처를 통해 강력한 성능, 유연성, 확장성을 제공하는 것입니다.

---

## 2. 문제 정의 및 기회 (Problem & Opportunity)

### 사용자(개발자) 문제 (User Problem)

B2B 서비스를 개발할 때, 수많은 입력 폼을 만들어야 합니다. 각 폼은 복잡한 유효성 검사 규칙, 조건부 필드, 동적 레이아웃 등 다양한 요구사항을 가지며, 이를 구현하기 위해 많은 보일러플레이트 코드와 테스트 코드를 반복적으로 작성해야 합니다. 이 과정은 많은 개발 공수를 소모하며, 휴먼 에러로 인한 버그 발생 가능성이 높고, 프로젝트 간 폼 구현 방식의 일관성을 유지하기 어렵습니다.

### 비즈니스 기회 (Business Opportunity)

- **개발 생산성 향상:** 폼 개발에 드는 시간을 70% 이상 단축하여 핵심 비즈니스 로직 개발에 집중.
- **품질 향상:** **관심사를 명확히 분리**하고, 선언적 스키마와 안정적인 `react-hook-form` 엔진을 통해 폼 관련 버그를 줄이고, 테스트 용이성을 높임.
- **유지보수 용이성:** 폼의 요구사항 변경 시, UI 코드가 아닌 스키마만 수정하면 되므로 유지보수가 간편해짐.
- **기술적 자산 확보:** 잘 만들어진 라이브러리를 통해 여러 프로젝트에서 일관된 폼 UI/UX와 개발 경험을 제공.

---

## 3. 목표 및 성공 지표 (Goals & Success Metrics)

### 제품 목표 (Goals)

- 개발자가 100줄 이상의 코드로 구현하던 복잡한 폼을 30줄 내외의 스키마 정의로 대체할 수 있도록 한다.
- 새로운 개발자가 라이브러리를 학습하고 첫 폼을 생성하기까지 걸리는 시간을 30분 이내로 단축시킨다.
- 명확하게 정의된 `UIAdapter` 인터페이스를 통해 새로운 UI 라이브러리 연동을 1일 이내에 가능하게 한다.

---

## 4. 타겟 사용자 (Target Audience)

### 페르소나 1: 중니어 프론트엔드 개발자

- **이름:** 김개발 (3년차)
- **소속:** React 기반 B2B SaaS 솔루션 개발팀
- **목표:** 다양한 고객사의 요구에 맞춰 복잡한 설정 페이지(폼)를 빠르고 안정적으로 개발하고 싶다.
- **좌절점 (Pain Point):** "새로운 폼을 만들 때마다 상태 관리, 유효성 검사, 레이아웃 잡는 코드를 거의 복사-붙여넣기 수준으로 만들고 있어요. 필드 하나 추가하거나 순서 바꾸는 것도 너무 귀찮고, 실수할까 봐 두렵습니다."

### 페르소나 2: 신입 프론트엔드 개발자

- **이름:** 박주니어 (1년차)
- **소속:** 신규 프로젝트 투입
- **목표:** 폼 개발 가이드를 빠르게 익혀서 팀에 기여하고 싶다. 복잡한 폼 상태 관리 로직보다 비즈니스 로직에 집중하고 싶다.
- **좌절점 (Pain Point):** "폼 상태를 다루는 게 너무 어려워요. 에러 처리나 값 변경을 추적하는 게 헷갈려서 버그를 자주 만들어요. 잘 만들어진 도구를 쓰고 싶어요."

### 페르소나 3: 시니어 개발자 / 테크 리드

- **이름:** 이시니어 (8년차)
- **소속:** 플랫폼팀 / 아키텍처 설계
- **목표:** 여러 프로젝트에서 사용될 표준화된 폼 개발 방식을 정립하여 전체 팀의 생산성과 코드 품질을 높이고 싶다.
- **좌절점 (Pain Point):** "프로젝트마다 폼 구현 방식이 제각각이라 코드 리뷰가 힘들고 유지보수 비용이 높아요. 성능, 확장성, 안정성이 보장된 공통 라이브러리가 절실합니다."

---

## 5. 요구사항 (Requirements)

### Epic 1: 스키마 기반 렌더링 엔진

| ID      | 요구사항 명                 | 요구사항 내용                                                                                         | 중요도 | 기타 정보 (기술 노트)                               |
| :------ | :-------------------------- | :---------------------------------------------------------------------------------------------------- | :----- | :-------------------------------------------------- |
| REQ-001 | 폼 상태 관리 엔진 내재화    | 내부적으로 `react-hook-form`의 `useForm` 훅을 사용하여 모든 폼 상태(값, 에러, 상태 등)를 관리한다.       | P0     | 라이브러리의 안정성과 성능의 핵심 기반.             |
| REQ-002 | 최상위 Form 컴포넌트 제공   | 스키마, 어댑터, `onSubmit` 핸들러 등을 `props`로 받는 `<SchemaForm>` 컴포넌트를 제공한다.              | P0     | 라이브러리의 진입점(Entry Point)이 되는 컴포넌트.   |
| REQ-003 | 스키마 기반 필드 렌더링     | 전달된 스키마 객체를 파싱하여 정의된 각 필드를 UI 어댑터를 통해 자동으로 렌더링한다.                   | P0     | 스키마의 각 `key`가 form field의 `name`과 매핑됨.     |

### Epic 2: 어댑터 패턴 아키텍처

| ID      | 요구사항 명                 | 요구사항 내용                                                                                             | 중요도 | 기타 정보 (기술 노트)                                                              |
| :------ | :-------------------------- | :-------------------------------------------------------------------------------------------------------- | :----- | :--------------------------------------------------------------------------------- |
| REQ-004 | Zod 스키마 직접 지원        | `zod` 스키마를 라이브러리의 표준으로 채택하고, `@hookform/resolvers/zod`를 통해 `react-hook-form`과 직접 통합한다. | P0     | 스키마와 유효성 검증 로직의 강력한 결합을 통해 타입 안정성과 DX 극대화.                |
| REQ-005 | UI Adapter 인터페이스       | 폼 필드를 렌더링하는 UI 라이브러리를 교체할 수 있는 `UIAdapter` 인터페이스를 정의한다.                      | P0     | `(type, props) => React.ReactNode` 형태의 렌더링 함수 맵(map) 구조. 어댑터 내의 컴포넌트는 `FieldProps` 인터페이스를 준수해야 함. |
| REQ-006 | Default UI Adapter 제공     | 별도 UI 라이브러리 없이 기본 HTML 태그(`<input>`, `<select>`)로 폼을 렌더링하는 `DefaultUIAdapter`를 제공한다. | P0     | 라이브러리 초기 테스트 및 간단한 폼 구현에 사용.                                   |
| REQ-007 | MUI Adapter 제공            | Material-UI(MUI) 컴포넌트로 폼을 렌더링하는 `MUIAdapter`를 제공한다.                                        | P0     | 어댑터의 효용성을 보여주는 핵심 예시. `TextField`, `Select` 등과 매핑.           |
| REQ-008 | 어댑터 주입 API             | `<SchemaForm>` 컴포넌트의 `uiAdapter` prop을 통해 사용할 어댑터를 명시적으로 주입할 수 있어야 한다.          | P0     | 예: `<SchemaForm uiAdapter={muiAdapter} ... />`                                    |

### Epic 3: 폼 컴포넌트 및 유효성 검사

| ID      | 요구사항 명                       | 요구사항 내용                                                                                                                             | 중요도 | 기타 정보 (기술 노트)                                                                 |
| :------ | :-------------------------------- | :---------------------------------------------------------------------------------------------------------------------------------------- | :----- | :------------------------------------------------------------------------------------ |
| REQ-009 | 스키마 메타데이터 표준            | `zod`의 `.meta()` 함수를 사용하여 `label`, `placeholder` 등 UI 렌더링에 필요한 정보를 스키마에 직접 정의할 수 있는 표준 방식을 제공한다.       | P0     | `meta({ label: '이름', placeholder: '이름 입력' })`과 같이 사용.                    |
| REQ-010 | 표준 컴포넌트 지원                | `text`, `password`, `textarea`, `number`, `select`, `switch` 등 표준 `componentType`을 스키마 `meta`에 정의하여 해당 UI로 렌더링할 수 있어야 한다. | P0     | `meta({ componentType: 'password' })`. `z.string()`은 기본적으로 `text` 타입으로 처리. |
| REQ-011 | 복합/커스텀 컴포넌트 지원         | 날짜 선택 등 외부 라이브러리 기반의 복합 컴포넌트나, 프로젝트별 커스텀 컴포넌트를 `meta.component` 속성을 통해 필드 단위로 직접 등록할 수 있어야 한다. | P1     | `meta({ component: MyCustomDatePicker })`.                                            |
| REQ-012 | 자동 유효성 검사 및 에러 표시     | 스키마 규칙(예: `z.string().min(5)`)이 자동으로 적용되고, 에러 발생 시 해당 필드 하단에 메시지가 표시되어야 한다. `mode` prop으로 폼 전체 검증 시점을, `meta.validationTrigger`로 필드별 검증 시점을 제어할 수 있어야 한다. | P0     | `react-hook-form`의 `formState.errors` 객체 및 `trigger` 함수 활용.                 |

### Epic 4: 유연한 상태 관리

| ID      | 요구사항 명                    | 요구사항 내용                                                                                                   | 중요도 | 기타 정보 (기술 노트)                                               |
| :------ | :----------------------------- | :-------------------------------------------------------------------------------------------------------------- | :----- | :------------------------------------------------------------------ |
| REQ-013 | 비제어(Uncontrolled) 모드      | 기본적으로 `<SchemaForm>`이 내부에서 `useForm` 인스턴스를 생성하고 상태를 직접 관리해야 한다.                     | P0     | 개발자가 별도 설정 없이 가장 간단하게 사용할 수 있는 모드.        |
| REQ-014 | 제어(Controlled) 모드          | 외부에서 생성한 `useForm`의 `control` 객체를 `<SchemaForm>`에 주입하여 상위 컴포넌트에서 폼 상태를 제어할 수 있어야 한다. | P0     | 복잡한 폼, 다른 상태와 연동이 필요할 때 사용. `props.control`. `defaultValues` 등은 외부 `useForm`에서 관리. |

### Epic 5: 고급 기능

| ID      | 요구사항 명             | 요구사항 내용                                                                                             | 중요도 | 기타 정보 (기술 노트)                                                              |
| :------ | :---------------------- | :-------------------------------------------------------------------------------------------------------- | :----- | :--------------------------------------------------------------------------------- |
| REQ-015 | 조건부 필드             | 특정 필드의 값에 따라 다른 필드를 동적으로 렌더링(노출/숨김)하거나 비활성화 할 수 있어야 한다.              | P1     | `react-hook-form`의 `watch` API 활용. 스키마에 `displayCondition` 같은 속성 추가 고려. |
| REQ-016 | 비동기 유효성 검사      | 서버 API 통신 등을 통해 사용자 입력값의 유효성을 비동기적으로 검증할 수 있어야 한다. (예: 아이디 중복 확인) | P1     | `react-hook-form`의 `validate` 함수 활용. 필드별 검증 진행 상태(`isValidating`) 추적 및 UI 피드백 제공. |

### Epic 6: UI 커스터마이징

| ID      | 요구사항 명                       | 요구사항 내용                                                                                                                                 | 중요도 | 기타 정보 (기술 노트)                                                                                       |
| :------ | :-------------------------------- | :-------------------------------------------------------------------------------------------------------------------------------------------- | :----- | :---------------------------------------------------------------------------------------------------------- |
| REQ-017 | 필드 레이아웃 커스터마이징        | `renderFieldLayout` prop에 함수를 전달하여 레이블, 입력 필드, 에러 메시지 등의 전체적인 구조와 스타일을 개발자가 완전히 제어할 수 있어야 한다. | P1     | 기본 레이아웃을 제공하되, 디자인 시스템 가이드라인에 맞춘 완벽한 커스터마이징을 지원하기 위한 핵심 기능.       |
| REQ-018 | CSS 변수를 통한 테마 지원         | `--sf-color-error`, `--sf-border-radius` 등 라이브러리가 제공하는 CSS Custom Property를 재정의하여 손쉽게 테마를 변경할 수 있어야 한다.      | P1     | 디자인 시스템과의 일관성을 유지하고, 손쉬운 브랜딩 적용을 위함.                                             |

---

## 6. 비기능적 요구사항 (Non-functional Requirements)

- **타겟 환경:** React 19+, TypeScript 5.5+
- **개발자 경험 (DX):** TypeScript를 완벽하게 지원하여 스키마 작성 및 `props` 전달 시 자동 완성 및 타입 안정성을 보장해야 한다.
- **문서화:** Storybook(v8+)을 활용하여 각 기능과 옵션에 대한 사용 예시와 API 문서를 명확히 제공해야 한다.
- **의존성 최소화:** 라이브러리 자체의 의존성을 최소화하여 번들 크기에 미치는 영향을 줄인다. (`react-hook-form`, `zod`는 `peer dependency`로 설정).

---

## 7. 릴리즈 계획 및 범위 (Release Plan & Scope)

### MVP 릴리즈 범위 (P0)

- **요구사항 ID:** REQ-001, 002, 003, 004, 005, 006, 007, 008, 009, 010, 012, 013, 014
- **주요 내용:** `react-hook-form` 기반 엔진, **Zod 스키마 직접 지원**, MUI/Default 어댑터, **`meta` 데이터를 활용한 표준 컴포넌트 및 유효성 검사**, 제어/비제어 모드 지원.

### Post-MVP (Fast-Follow) 릴리즈 범위 (P1)

- **요구사항 ID:** REQ-011, 015, 016, 017, 018
- **주요 내용:** **커스텀 컴포넌트 직접 등록**, 조건부 필드, 비동기 유효성 검사, **필드 레이아웃 커스터마이징(`renderFieldLayout`)**, **CSS 변수 테마 지원**.

### 고려 대상 제외 (Initial Releases)

- 복잡한 레이아웃 시스템: Grid, Tabs, Field Groups 등 필드를 그룹화하거나 수평 배치하는 기능. (단, `renderFieldLayout`으로 일부 구현 가능)
- 파일 업로드, WYSIWYG 에디터 등 고도로 복잡한 컴포넌트. 